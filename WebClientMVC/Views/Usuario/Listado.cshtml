@model UsuarioViewModel

@{
	ViewData["Title"] = "Usuario";
	ViewData["Module"] = "Usuario";
	ViewData["Action"] = "Listado";
}

@section ContentHeader {
	<nav class="flex w-min">
	</nav>
}

<div>
	<div id="table-wrapper" class="p-4"></div>
</div>

@section Scripts {
	<script>
		function togglePortalDropdown(event,id) {
		  console.log(id);
		  event.stopPropagation();
		  const button = event.currentTarget;
		  const rect = button.getBoundingClientRect();

		  let dropdown = document.getElementById('portal-dropdown');
		  if (!dropdown) {
			dropdown = document.createElement('div');
			dropdown.id = 'portal-dropdown';
			dropdown.className = "absolute bg-white divide-y divide-gray-100 rounded-lg shadow z-50";
			dropdown.innerHTML = `
			  <ul class="py-2 text-sm text-gray-700">
				<li><a href="#" class="block px-4 py-2 hover:bg-gray-100">Editar</a></li>
				<li><a href="#" class="block px-4 py-2 hover:bg-gray-100">Eliminar</a></li>
			  </ul>
			`;
			document.body.appendChild(dropdown);
		  }

		  if (dropdown.style.display === 'block') {
			dropdown.style.display = 'none';
		  } else {
			dropdown.style.display = 'block';
			dropdown.style.top = rect.bottom + window.scrollY + 'px';
			dropdown.style.left = rect.left + window.scrollX + 'px';
		  }
		}

		document.addEventListener('click', function(event) {
		  const dropdown = document.getElementById('portal-dropdown');
		  if (dropdown && !dropdown.contains(event.target) && event.target.id !== 'dropdown-button') {
			dropdown.style.display = 'none';
		  }
		});
	</script>
	<script>
		new gridjs.Grid({
			columns: [
				'Id',
				'Nombre',
				'Estado',
				{
					name: 'Acciones',
					formatter: (cell, row) => {
						return gridjs.html(`
							<div class="relative inline-block text-left">
								<button onclick="togglePortalDropdown(event,'${row._cells[0].data}')" class="inline-flex items-center p-2 text-sm font-medium text-center text-gray-900 bg-white rounded-lg hover:bg-gray-100 focus:outline-none dark:text-white dark:bg-gray-800 dark:hover:bg-gray-700">
									<svg class="w-5 h-5" aria-hidden="true" fill="currentColor" viewBox="0 0 4 15">
										<path d="M3.5 1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 6.041a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm0 5.959a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"/>
									</svg>
								</button>
							</div>
						`);
					}
				}
			],
			search: true,
			data: [
				['1','Juan Pérez', 'Activo'],
				['2','Juan Pérez', 'Activo'],
				['3','Laura Gómez', 'Inactivo'],
				['4','Laura Gómez', 'Inactivo'],
				['5','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['6','Laura Gómez', 'Inactivo'],
				['7','Carlos Ruiz', 'Pendiente']
			],
			pagination: {
				enabled: true,
				limit: 10
			},
			 language: {
			  'search': {
				'placeholder': 'Buscar...'
			  },
			  'pagination': {
				'showing': 'Viendo',
				'to': 'a',
				'of': 'de',
				'results': () => 'Resultados',
				'previous': 'Anterior',
				'next': 'Siguiente'
			  }
			},
			sort: true,
			resizable: true,
			className: {
				table: 'text-sm text-left text-gray-500 dark:text-gray-400 ',
				th: 'px-6 py-3 bg-gray-50 ',
				td: 'px-6 py-4 bg-white'
			},
		}).render(document.getElementById("table-wrapper"));
	</script>
}
